{"ast":null,"code":"import _asyncToGenerator from \"C:/current_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"C:\\\\current_front\\\\node_modules\\\\core-js\\\\modules\\\\es.array.iterator.js\";\nimport \"C:\\\\current_front\\\\node_modules\\\\core-js\\\\modules\\\\es.promise.js\";\nimport \"C:\\\\current_front\\\\node_modules\\\\core-js\\\\modules\\\\es.object.assign.js\";\nimport \"C:\\\\current_front\\\\node_modules\\\\core-js\\\\modules\\\\es.promise.finally.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport { createApp } from 'vue';\nimport { createStore } from 'vuex';\nimport { GetUsernameFromCoockies } from '@/assets/get_username_from_cookies.js';\nimport App from './App.vue';\nimport router from './router';\nimport \"@/assets/css/table.css\";\nimport vSelect from \"vue-select\";\nimport \"vue-select/dist/vue-select.css\";\nvar store = createStore({\n  actions: {\n    websocketConnect: function websocketConnect(ctx) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var username, url, connect_server;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                connect_server = function _connect_server() {\n                  var username = new GetUsernameFromCoockies(document.cookie).findUsernameString();\n                  var url = \"ws://127.0.0.1:8000/ws/chat/\".concat(username, \"/\");\n                  console.log('Starting connection to WebSocket Server');\n                  this.connection = new WebSocket(url);\n                };\n\n                username = new GetUsernameFromCoockies(document.cookie).findUsernameString();\n                url = \"ws://127.0.0.1:8000/ws/chat/\".concat(username, \"/\");\n                console.log('Starting connection to WebSocket Server');\n                _this.connection = new WebSocket(url);\n\n                _this.connection.onmessage = function (event) {\n                  var messageCatch = JSON.parse(event.data);\n                  console.log(messageCatch); // if (JSON.parse(messageCatch.message).username_id !== undefined) {\n                  //     const operator_id = JSON.parse(messageCatch.message).username_id\n                  //     document.cookie = `username_id=${operator_id}; secure`\n                  //     // const InstanceSetWorkStatus = new SetWorkStatus(messageCatch)\n                  //     // InstanceSetWorkStatus.setStatus()\n                  //     // const InstanceSetBankButton = new SetBankButton()\n                  //     // InstanceSetBankButton.setButtonStatus(messageCatch)\n                  // }\n                  // else {\n                  //     // const tableHeadersMessage = JSON.parse(messageCatch.message).headers\n                  //     // const tableBodyMessage = JSON.parse(messageCatch.message).body\n                  //     // const dropDownCommentsMessage = JSON.parse(messageCatch.message).dropdown_comment\n                  //     // const dropDownCityAlfabank = JSON.parse(messageCatch.message).dropdown_city\n                  //     // ctx.commit('updateHeaders', tableHeadersMessage)\n                  //     // ctx.commit('updateClients', tableBodyMessage)\n                  //     // ctx.commit('updateDropDownCommentsArray', dropDownCommentsMessage)\n                  //     // ctx.commit('updateDropDownCityAlfabank', dropDownCityAlfabank)\n                  // }                \n                };\n\n                _this.connection.onopen = function (event) {\n                  console.log('Successfully connected to first channel websocket');\n                };\n\n                _this.connection.onclose = function (event) {\n                  console.log('Disconnect! Start connection');\n\n                  for (var i = 0; i < 3; i++) {\n                    setTimeout(function timer() {\n                      var username = new GetUsernameFromCoockies(document.cookie).findUsernameString();\n                      var url = \"ws://localhost:8000/ws/chat/\".concat(username, \"/\");\n                      console.log('Starting connection to WebSocket Server');\n                      this.connection = new WebSocket(url);\n                    }, i * 3000);\n                  }\n\n                  location.reload();\n                };\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  },\n  mutations: {\n    updateHeaders: function updateHeaders(state, tableHeadersMessage) {\n      state.tableHeadersArray = tableHeadersMessage;\n    },\n    updateClients: function updateClients(state, tableBodyMessage) {\n      state.tableBodyArray = tableBodyMessage.sort(function (a, b) {\n        if (parseFloat(a.scoring_time) > parseFloat(b.scoring_time)) {\n          return 1;\n        }\n\n        if (parseFloat(a.scoring_time) < parseFloat(b.scoring_time)) {\n          return -1;\n        }\n\n        return 0;\n      });\n    },\n    updateDropDownCommentsArray: function updateDropDownCommentsArray(state, dropDownCommentsMessage) {\n      state.dropDownCommentsArray = dropDownCommentsMessage;\n    },\n    updateDropDownCityAlfabank: function updateDropDownCityAlfabank(state, dropDownCityAlfabank) {\n      state.dropDownCityAlfabank = dropDownCityAlfabank;\n    }\n  },\n  state: {\n    tableHeadersArray: [],\n    tableBodyArray: [],\n    dropDownCommentsArray: [],\n    dropDownCityAlfabank: []\n  },\n  getters: {\n    allHeaders: function allHeaders(state) {\n      return state.tableHeadersArray;\n    },\n    allClients: function allClients(state) {\n      return state.tableBodyArray;\n    },\n    allDropDownComments: function allDropDownComments(state) {\n      return state.dropDownCommentsArray;\n    },\n    allDropDownCityAlfabank: function allDropDownCityAlfabank(state) {\n      return state.dropDownCityAlfabank;\n    }\n  },\n  modules: {}\n});\nvar app = createApp(App);\napp.use(vSelect);\napp.use(store);\napp.use(router);\napp.mount('#app');","map":{"version":3,"sources":["C:/current_front/src/main.js"],"names":["createApp","createStore","GetUsernameFromCoockies","App","router","vSelect","store","actions","websocketConnect","ctx","connect_server","username","document","cookie","findUsernameString","url","console","log","connection","WebSocket","onmessage","event","messageCatch","JSON","parse","data","onopen","onclose","i","setTimeout","timer","location","reload","mutations","updateHeaders","state","tableHeadersMessage","tableHeadersArray","updateClients","tableBodyMessage","tableBodyArray","sort","a","b","parseFloat","scoring_time","updateDropDownCommentsArray","dropDownCommentsMessage","dropDownCommentsArray","updateDropDownCityAlfabank","dropDownCityAlfabank","getters","allHeaders","allClients","allDropDownComments","allDropDownCityAlfabank","modules","app","use","mount"],"mappings":"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","sourcesContent":["import { createApp } from 'vue'\r\nimport { createStore } from 'vuex'\r\nimport { GetUsernameFromCoockies } from '@/assets/get_username_from_cookies.js'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport \"@/assets/css/table.css\"\r\nimport vSelect from \"vue-select\";\r\nimport \"vue-select/dist/vue-select.css\";\r\n\r\n\r\nconst store = createStore({\r\n    actions: {\r\n        async websocketConnect(ctx) {\r\n            let username = new GetUsernameFromCoockies(document.cookie).findUsernameString ()\r\n            var url = `ws://127.0.0.1:8000/ws/chat/${username}/`\r\n            console.log('Starting connection to WebSocket Server')\r\n            this.connection = new WebSocket(url)\r\n\r\n            this.connection.onmessage = function (event) {\r\n                var messageCatch = JSON.parse(event.data)\r\n                console.log(messageCatch)\r\n                \r\n                // if (JSON.parse(messageCatch.message).username_id !== undefined) {\r\n                //     const operator_id = JSON.parse(messageCatch.message).username_id\r\n                    \r\n                //     document.cookie = `username_id=${operator_id}; secure`\r\n\r\n                //     // const InstanceSetWorkStatus = new SetWorkStatus(messageCatch)\r\n                //     // InstanceSetWorkStatus.setStatus()\r\n\r\n                //     // const InstanceSetBankButton = new SetBankButton()\r\n                //     // InstanceSetBankButton.setButtonStatus(messageCatch)\r\n                // }\r\n                // else {\r\n                //     // const tableHeadersMessage = JSON.parse(messageCatch.message).headers\r\n                //     // const tableBodyMessage = JSON.parse(messageCatch.message).body\r\n                //     // const dropDownCommentsMessage = JSON.parse(messageCatch.message).dropdown_comment\r\n                //     // const dropDownCityAlfabank = JSON.parse(messageCatch.message).dropdown_city\r\n        \r\n\r\n                //     // ctx.commit('updateHeaders', tableHeadersMessage)\r\n                //     // ctx.commit('updateClients', tableBodyMessage)\r\n                //     // ctx.commit('updateDropDownCommentsArray', dropDownCommentsMessage)\r\n                //     // ctx.commit('updateDropDownCityAlfabank', dropDownCityAlfabank)\r\n                // }                \r\n            }\r\n            \r\n            this.connection.onopen = function (event) {\r\n                console.log('Successfully connected to first channel websocket')\r\n                }\r\n            \r\n            function connect_server() {\r\n                let username = new GetUsernameFromCoockies(document.cookie).findUsernameString ()\r\n                var url = `ws://127.0.0.1:8000/ws/chat/${username}/`\r\n                console.log('Starting connection to WebSocket Server')\r\n                this.connection = new WebSocket(url);\r\n            }\r\n\r\n            this.connection.onclose = function (event) {\r\n                console.log('Disconnect! Start connection')\r\n                for (var i = 0; i < 3; i++) {\r\n                    setTimeout( function timer(){\r\n                        let username = new GetUsernameFromCoockies(document.cookie).findUsernameString ()\r\n                        var url = `ws://localhost:8000/ws/chat/${username}/`\r\n                        console.log('Starting connection to WebSocket Server')\r\n                        this.connection = new WebSocket(url);\r\n                    }, i*3000 );\r\n                }\r\n                location.reload()\r\n            }\r\n        }\r\n    },\r\n    mutations: {\r\n        updateHeaders (state, tableHeadersMessage) {\r\n            state.tableHeadersArray = tableHeadersMessage\r\n        },\r\n        updateClients (state, tableBodyMessage) {\r\n            state.tableBodyArray = tableBodyMessage.sort(function (a, b) {\r\n                if (parseFloat(a.scoring_time) > parseFloat(b.scoring_time)) {\r\n                    return 1;\r\n                  }\r\n                  if (parseFloat(a.scoring_time) < parseFloat(b.scoring_time)) {\r\n                    return -1;\r\n                  }\r\n                  return 0;\r\n            })\r\n        },\r\n        updateDropDownCommentsArray (state, dropDownCommentsMessage) {\r\n            state.dropDownCommentsArray = dropDownCommentsMessage\r\n        },\r\n        updateDropDownCityAlfabank (state, dropDownCityAlfabank) {\r\n            state.dropDownCityAlfabank = dropDownCityAlfabank\r\n        }\r\n    },\r\n    state: {\r\n        tableHeadersArray: [],\r\n        tableBodyArray: [],\r\n        dropDownCommentsArray: [],\r\n        dropDownCityAlfabank: [],\r\n    },\r\n    getters: {\r\n        allHeaders(state) {\r\n            return state.tableHeadersArray\r\n        },\r\n        allClients(state) {\r\n            return state.tableBodyArray\r\n        },\r\n        allDropDownComments(state) {\r\n            return state.dropDownCommentsArray\r\n        },\r\n        allDropDownCityAlfabank(state){\r\n            return state.dropDownCityAlfabank\r\n        }\r\n    },\r\n    modules: {}\r\n})\r\n\r\nconst app = createApp(App);\r\napp.use(vSelect)\r\napp.use(store)\r\napp.use(router)\r\napp.mount('#app')\r\n"]},"metadata":{},"sourceType":"module"}